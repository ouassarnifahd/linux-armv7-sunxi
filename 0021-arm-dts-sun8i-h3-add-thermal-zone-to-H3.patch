#  Date: Sun, 2 June 2019.
#  Based on https://github.com/armbian/build/blob/master/patch/kernel/sunxi-next/ths-29-add-correct-h5-thermal-zone.patch

--- sun8i-h3.dtsi	2019-06-02 12:42:21.261122064 +0200
+++ sun8i-h3.dtsi.new	2019-06-02 12:44:11.164683637 +0200
@@ -41,6 +41,7 @@
  */
 
 #include "sunxi-h3-h5.dtsi"
+#include <dt-bindings/thermal/thermal.h>
 
 / {
 	cpu0_opp_table: opp_table0 {
@@ -111,6 +112,80 @@
 		};
 	};
 
+    thermal-zones {
+        cpu-thermal {
+            /* milliseconds */
+            polling-delay-passive = <250>;
+            polling-delay = <1000>;
+            thermal-sensors = <&ths>;
+
+            trips {
+                cpu_warm: cpu_warm {
+                    temperature = <75000>;
+                    hysteresis = <2000>;
+                    type = "passive";
+                };
+
+                cpu_hot_pre: cpu_hot_pre {
+                    temperature = <80000>;
+                    hysteresis = <2000>;
+                    type = "passive";
+                };
+
+                cpu_hot: cpu_hot {
+                    temperature = <85000>;
+                    hysteresis = <2000>;
+                    type = "passive";
+                };
+
+                cpu_very_hot_pre: cpu_very_hot_pre {
+                    temperature = <90000>;
+                    hysteresis = <2000>;
+                    type = "passive";
+                };
+
+                cpu_very_hot: cpu_very_hot {
+                    temperature = <95000>;
+                    hysteresis = <2000>;
+                    type = "passive";
+                };
+
+                cpu_crit: cpu_crit {
+                    temperature = <105000>;
+                    hysteresis = <2000>;
+                    type = "critical";
+                };    
+            };
+                                                         
+            cooling-maps {
+                cpu_warm_limit_cpu {
+                    trip = <&cpu_warm>;
+                    cooling-device = <&cpu0 THERMAL_NO_LIMIT 2>;
+                };
+
+                cpu_hot_pre_limit_cpu {
+                    trip = <&cpu_hot_pre>;
+                    cooling-device = <&cpu0 2 3>;
+                };
+
+                cpu_hot_limit_cpu {
+                    trip = <&cpu_hot>;
+                    cooling-device = <&cpu0 3 4>;
+                };
+
+                cpu_very_hot_pre_limit_cpu {
+                    trip = <&cpu_very_hot_pre>;
+                    cooling-device = <&cpu0 5 6>;
+                };
+
+                cpu_very_hot_limit_cpu {
+                    trip = <&cpu_very_hot>;
+                    cooling-device = <&cpu0 7 THERMAL_NO_LIMIT>;
+                };
+            };                                                        
+        };
+    };
+
 	timer {
 		compatible = "arm,armv7-timer";
 		interrupts = <GIC_PPI 13 (GIC_CPU_MASK_SIMPLE(4) | IRQ_TYPE_LEVEL_LOW)>,
